# Production Environment Variables
# Copy this file to .env.production and fill in the values

# ============================================================================
# CRITICAL SECURITY SETTINGS
# ============================================================================

# Generate a new secret key with:
# python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
DJANGO_SECRET_KEY=your-super-secret-key-change-this-in-production-minimum-50-chars

# Debug mode (MUST be 0 in production, or False)
DEBUG=False

# Allowed hosts (comma-separated, no spaces)
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,api.yourdomain.com

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

DB_NAME=airbnb_production
DB_USER=airbnb_prod_user
DB_PASSWORD=change-this-strong-password-min-20-chars
DB_HOST=db
DB_PORT=5432

# Database connection string (alternative format)
# DATABASE_URL=postgresql://airbnb_prod_user:password@db:5432/airbnb_production

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

REDIS_URL=redis://redis:6379/0

# ============================================================================
# CORS SETTINGS
# ============================================================================

# Allowed origins for CORS (comma-separated)
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# EMAIL CONFIGURATION (For production notifications)
# ============================================================================

# Email backend (default: console for development)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# Gmail configuration example:
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-gmail@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password

# Or SendGrid configuration:
# EMAIL_BACKEND=sendgrid_backend.SendgridBackend
# SENDGRID_API_KEY=your-sendgrid-api-key

# Default from addresses
DEFAULT_FROM_EMAIL=noreply@yourdomain.com
SERVER_EMAIL=server@yourdomain.com

# ============================================================================
# CELERY CONFIGURATION
# ============================================================================

CELERY_BROKER_URL=amqp://guest:guest@rabbitmq:5672//
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TASK_ALWAYS_EAGER=False

# ============================================================================
# RABBITMQ CONFIGURATION
# ============================================================================

RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672

# ============================================================================
# GITHUB ACTIONS SECRETS (Configure in GitHub)
# ============================================================================

# Add these as GitHub Repository Secrets (Settings > Secrets and variables > Actions):
# - DJANGO_SECRET_KEY (generate with: python manage.py shell -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())")
# - RENDER_SERVICE_ID (from Render dashboard)
# - RENDER_API_KEY (from Render account settings)
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@example.com
EMAIL_HOST_PASSWORD=your-email-app-password

# Admin email for error notifications
ADMIN_EMAIL=admin@yourdomain.com

# ============================================================================
# CLOUD STORAGE (AWS S3 - Optional)
# ============================================================================
# MONITORING & LOGGING
# ============================================================================

# Sentry Configuration (Error Tracking)
# Get your DSN from: https://sentry.io/
SENTRY_DSN=https://your-sentry-key@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=1.0.0

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Health check endpoints
# /health/ - Overall health status
# /health/live/ - Liveness probe (is app running?)
# /health/ready/ - Readiness probe (is app ready to serve?)
# /metrics/ - Prometheus metrics

# ============================================================================
# SECURITY HEADERS
# ============================================================================

# HTTPS settings (1=enabled, 0=disabled)
SECURE_SSL_REDIRECT=1
SESSION_COOKIE_SECURE=1
CSRF_COOKIE_SECURE=1

# ============================================================================
# RATE LIMITING
# ============================================================================

# API rate limits
THROTTLE_ANON_RATE=100/hour
THROTTLE_USER_RATE=1000/hour

# ============================================================================
# CELERY (Background Tasks)
# ============================================================================

# For RabbitMQ (AMQP):
# RABBITMQ_USER=guest
# RABBITMQ_PASSWORD=guest
# CELERY_BROKER_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@rabbitmq:5672//
# CELERY_RESULT_BACKEND=rpc://

# For Redis (default):
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# ============================================================================
# SUPERUSER (Auto-creation in production - Optional)
# ============================================================================

DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@yourdomain.com
DJANGO_SUPERUSER_PASSWORD=change-this-super-secure-password

# ============================================================================
# ADDITIONAL PRODUCTION SETTINGS
# ============================================================================

# Worker processes for Gunicorn
WEB_CONCURRENCY=4

# Gunicorn timeout
GUNICORN_TIMEOUT=120

# Time zone
TIME_ZONE=UTC

# Language
LANGUAGE_CODE=en-us
